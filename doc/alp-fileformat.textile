h1. Alithia Package (ALP) File Format

This document describes the file format used by Alithia Engine for its Alithia Package (ALP) files.

h1. Description of archive

Alithia Package files (ALP files) are simple uncompressed archives with a flat directory of archived files and raw data. The directory is made up of entries that contain the file name with its full path (relative to the archive), its absolute position in the package file and its size in bytes.

h2. File layout

The package is made up of three parts: the header, the raw data and the directory. The directory always cames at the end of the file. There is no information about number of files in the directory - the whole directory until the end of the file must be read.
  
All integer numbers are in little endian.

h3. Header

|_. Element Types|_. Use|
|4 bytes|for the 'ALP1' string|
|1 uint32|position of the directory in the file|
  
h3. Raw data

After the header the package file contains the raw data of all files included. After the raw data, the directory is found (the loader can seek to the directory using the @uint32@ found at position 4 of the file - that is the number right after the @ALP1@ magic string).

h3. Directory
  
The directory is made up of one or more entries. Since there is no known number of the entries that can be found in the directory, the loader has to read until the end of the file.
  
|_. Element Types|_. Use|
|1 uint16|filename's length in bytes|
| _len_ bytes|filename string|
|1 uint32|file's absolute position in the file|
|1 uint32|file's length in bytes|

h3. Source code

Check the @tools/alpak/alpak.c@ source code file. The program is rather small at about 165 lines of code and very readable.
